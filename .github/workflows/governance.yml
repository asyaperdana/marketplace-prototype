name: Repository Governance

on:
    push:
        branches: [main, master]
    pull_request:
        branches: [main, master]

jobs:
    enforce-policy:
        name: Enforce Source-Only Policy
        runs-on: ubuntu-latest
        steps:
            - name: Checkout Code
              uses: actions/checkout@v3

            - name: ğŸ›¡ï¸ Scan for Forbidden Artifacts
              run: |
                  chmod +x scripts/scan-forbidden-paths.sh
                  ./scripts/scan-forbidden-paths.sh

            - name: ğŸ“¦ Install Dependencies
              run: npm ci

            - name: ğŸ” Lint Code
              run: npm run lint
              continue-on-error: true # Warning only for now, can be made strict later

            - name: âœ… Type Check
              run: npm run check
              continue-on-error: true # Warning only for now
